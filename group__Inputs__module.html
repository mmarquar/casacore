<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>casacore: Inputs_module</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">casacore
   &#160;<span id="projectnumber">$Rev$</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">Inputs_module</div>  </div>
<div class="ingroups"><a class="el" href="group__casa.html">casa package (libcasa_casa)</a></div></div><!--header-->
<div class="contents">

<p>A module for simple command line user interface classes.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__Inputs__module__internal__classes"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Inputs__module__internal__classes.html">Inputs_module_internal_classes</a></td></tr>
<tr class="memdesc:group__Inputs__module__internal__classes"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal Inputs_module classes and functions. <br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1Input.html">casacore::Input</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="Input_8h.html">Input.h</a>: A simple command-line argument method for applications.  <a href="classcasacore_1_1Input.html#details">More...</a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<p>A module for simple command line user interface classes. </p>
<pre class="fragment"> @anchor Inputs_module_anchor 
</pre><p>See <a href="#Inputs_module_Class_List">below</a> for an overview of the classes in this module.</p>
<h3>Prerequisite</h3>
<ul>
<li>
<a class="el" href="classcasacore_1_1String.html" title="String: the storage and methods of handling collections of characters.">String</a> </li>
<li>
The <a class="el" href="namespacecasacore_1_1C.html">C</a> language int main(int argc, const char* argv[]) convention. </li>
</ul>
<h3>Review Status</h3>
<dl>
<dt>Reviewed By:</dt>
<dd>UNKNOWN</dd>
<dt>Date Reviewed:</dt>
<dd>before2004/08/25</dd>
</dl>
<h3>Etymology</h3>
<p>The Inputs module name reflects the Casacore convention of pluralizing the name of the major class it contains. The <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a> class name is a reflection of it's role as the early command line user interface for Casacore applications. This class provides "inputs" in the form "key=value" or "-key value."</p>
<h3>Synopsis</h3>
<p>During the old AIPS++ prototyping stage a basic command line user interface was developed. This attempt at easing the trouble of passing information to an executable program resulted in a set of C++ classes called <a class="el" href="classcasacore_1_1Param.html" title="A simple keyword/value pair with internal help Strings.">Param</a> and <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a>. The programmer may simply include the <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a> class into their code and have immediate Command Line User Interface (CLUI) capabilities. The programmer's Casacore application is run from the unix level prompt by invoking its name and listing linearly on the same command line the "keyword=values" or "-keyword values" associated with proper execution. The <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a> and <a class="el" href="classcasacore_1_1Param.html" title="A simple keyword/value pair with internal help Strings.">Param</a> classes will successfully parse the command line into the executable program and check for appropriateness.</p>
<p>The CLUI capabilities are further extended to a Graphical User Interface through the use of the Khoros Cantata environment. The user starts up Cantata from the unix prompt and, by utilizing a series of pull down windows, invisibly creates an X-based window for visual display of all parameters associated with the Casacore application's need for external input.</p>
<p>The basic command line user interface is an ordered series of "keyword=value" pairs, which we call parameters. The names parameter and keyword may correctly be used to refer to each other.</p>
<p>The class <a class="el" href="classcasacore_1_1Param.html" title="A simple keyword/value pair with internal help Strings.">Param</a> (see <a class="el" href="Param_8h.html">Param.h</a>) implements one single such parameter. Values may be Int, <a class="el" href="classcasacore_1_1Block.html">Block&lt;Int&gt;</a>, double, Block&lt;double&gt;, Bool, or Strings. In addition to a name and a value, a <a class="el" href="classcasacore_1_1Param.html" title="A simple keyword/value pair with internal help Strings.">Param</a> parameter has a variety of other attributes, such as a one-line help string (useful when being prompted for input or with hypertext identifiers, etc...), a type, a range and optional units. All of these attributes are character strings; parsing and error checking is done at a different (hidden) level. The programmer, however, will never interact with a parameter through it's <a class="el" href="classcasacore_1_1Param.html" title="A simple keyword/value pair with internal help Strings.">Param</a> class interface. Interaction is done with the class <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a>, which is a container of <a class="el" href="classcasacore_1_1Param.html" title="A simple keyword/value pair with internal help Strings.">Param</a>'s, with a variety of user interface attributes (help-level, debug-level, etc...).</p>
<p>Although the programmer must supply the user interface with a number of predefined program parameters, the user interface itself will create a small number of system parameters (help=, debug=). The purpose of these is to tell the task how to communicate with the user and it's environment, and give the user control over these items. For example, the user may want to see (debug) messages above a certain threshold level. The programmer simply adds debug levels to their code and allows the user to specify how deeply they wish the debugging to progress.</p>
<p>For example, a interactive UNIX shell session may look like:</p>
<div class="fragment"><div class="line">1% MyProgram key1=val1 key3=val3</div>
<div class="line">2% MyProgram key1=val1 key2=val3 debug=5</div>
<div class="line">3% MyProgram help=prompt</div>
<div class="line">4% MyProgram help=pane &gt; prog.pane</div>
</div><!-- fragment --><p>In command 1% the user has set several parameters for the program MyProgram to applicable values. The 2% command line invokes the executable and sets the level of displayed debugging to the programmer specified 5th level. Command 3%: the user is prompted, and parameter default values are restored. Command 4% gives an example of the self-describing mode of programs, where a pane description file for Khoros has been constructed. The latter is the first step toward building a Khoros Graphic User Interface.</p>
<p>The <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a> class is a means for building a linked list of parameters and gaining access to them once created. <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a> takes care of system/environment variables and assigns their values within the programmer's code. The linked list of parameters is limited only by the number of names the programmer can dream up. The programmer need not think hard on the order of definition of parameters in <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a>. The list of key=values given on the command line by the user need not be in any specific order.</p>
<p>The definition of parameters is by simply creating an <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a> and then using the appropriate <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a> Create member function. Then the programmer adds to the list of parameters as necessary.</p>
<h3>Example</h3>
<p><a class="anchor" id="Inputs_example"></a> </p>
<div class="fragment"><div class="line">01 #include &lt;<a class="code" href="aipstype_8h.html#ac63154d2ff8ccc605d9dbb513dabf874" title="For temporary backward namespace compatibility, use casa as alias for casacore.">casacore</a>/casa/Inputs/Input.h&gt;      <span class="comment">// need this if you want it to work</span></div>
<div class="line">02 #include &lt;aips/Plot.h&gt;</div>
<div class="line">03 <span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keyword">const</span> <span class="keywordtype">char</span>* argv[])</div>
<div class="line">04 {</div>
<div class="line">05    Input inputs(1);</div>
<div class="line">06    <span class="comment">// Define our input structure</span></div>
<div class="line">07    inputs.version(<span class="stringliteral">&quot;Id: xyPlot.C,v 1.1 1993/01/29 20:45:48 bglenden Exp&quot;</span>);</div>
<div class="line">08    inputs.create(<span class="stringliteral">&quot;xyfile&quot;</span>, </div>
<div class="line">09                <span class="stringliteral">&quot;/tmp/xy.aipsio&quot;</span>,</div>
<div class="line">10                <span class="stringliteral">&quot;File which contains xy vectors&quot;</span>,</div>
<div class="line">11                <span class="stringliteral">&quot;InFile&quot;</span>);</div>
<div class="line">12    inputs.create(<span class="stringliteral">&quot;overplot&quot;</span>, <span class="stringliteral">&quot;False&quot;</span>, <span class="stringliteral">&quot;Multiple plots?&quot;</span>, <span class="stringliteral">&quot;Bool&quot;</span>);</div>
<div class="line">13    inputs.create(<span class="stringliteral">&quot;lines&quot;</span>, <span class="stringliteral">&quot;True&quot;</span>, <span class="stringliteral">&quot;Plot lines or points?&quot;</span>, <span class="stringliteral">&quot;Bool&quot;</span>);</div>
<div class="line">14    </div>
<div class="line">15    <span class="comment">// and Fill them from the command line</span></div>
<div class="line">16    inputs.readArguments(argc, argv);</div>
<div class="line">17</div>
<div class="line">18    <span class="keywordflow">try</span> {</div>
<div class="line">19      <span class="keyword">const</span> <a class="code" href="namespacecasacore.html#aee8247dad3ca180405bdb6835513a5ad">Char</a> *filename = inputs.getString(<span class="stringliteral">&quot;xyfile&quot;</span>);</div>
<div class="line">20      AipsIO xyfile(filename, <a class="code" href="classcasacore_1_1ByteIO.html#afa01b2ceb18a6e7db1ef40ebcd7158dfa2fc353edf79546f6c0ceef30e6436a67">ByteIO::Old</a>);</div>
<div class="line">21      Vector&lt;float&gt; x, y;</div>
<div class="line">22      Plot plot;</div>
<div class="line">23</div>
<div class="line">24      xyfile &gt;&gt; x &gt;&gt; y; <span class="comment">// initial vectors</span></div>
<div class="line">25      plot(x,y,inputs.getBool(<span class="stringliteral">&quot;lines&quot;</span>));</div>
<div class="line">26</div>
<div class="line">27      <span class="keywordflow">for</span> (;;) { <span class="comment">// forever</span></div>
<div class="line">28          xyfile &gt;&gt; x &gt;&gt; y;</div>
<div class="line">29          <span class="keywordflow">if</span> (inputs.getBool(<span class="stringliteral">&quot;overplot&quot;</span>) == <a class="code" href="namespacecasacore.html#ad5c850f9e177173e0f7d0ad57091501d">True</a>) {</div>
<div class="line">30              plot(x,y,inputs.getBool(<span class="stringliteral">&quot;lines&quot;</span>));</div>
<div class="line">31          } <span class="keywordflow">else</span> {</div>
<div class="line">32              plot.newPlot();</div>
<div class="line">33              plot(x,y,inputs.getBool(<span class="stringliteral">&quot;lines&quot;</span>));</div>
<div class="line">34          }</div>
<div class="line">35      }</div>
<div class="line">36  } <span class="keywordflow">catch</span> (AipsIOError x) {</div>
<div class="line">37       ; <span class="comment">// nothing - no more data</span></div>
<div class="line">38  } <span class="keywordflow">catch</span> (AllocError x) {</div>
<div class="line">39       cerr &lt;&lt; <span class="stringliteral">&quot;AllocError : &quot;</span> &lt;&lt; x.getMesg() &lt;&lt; endl;</div>
<div class="line">40       cerr &lt;&lt; <span class="stringliteral">&quot;Size is : &quot;</span> &lt;&lt; x.size() &lt;&lt; endl;</div>
<div class="line">41  } <span class="keywordflow">catch</span> (AipsError x) {</div>
<div class="line">42       cerr &lt;&lt; <span class="stringliteral">&quot;aipserror: error &quot;</span> &lt;&lt; x.getMesg() &lt;&lt; endl;</div>
<div class="line">43       <span class="keywordflow">return</span> 1;</div>
<div class="line">44  }</div>
<div class="line">45</div>
<div class="line">46    cout &lt;&lt; <span class="stringliteral">&quot;Any key to exit:\n&quot;</span>;</div>
<div class="line">47</div>
<div class="line">48  <span class="keywordtype">char</span> ch;</div>
<div class="line">49  cin.get(ch);</div>
<div class="line">50</div>
<div class="line">51  <span class="keywordflow">return</span> 0;</div>
<div class="line">52 }</div>
</div><!-- fragment --><p> Let us discuss this program line for line.</p>
<p>03 - This is the method of passing the command line through to the main body of code. This obviously makes it mandatory. The inclusion of the argc, argv is very well discussed in Stroustrup, The C++ Programming Language, page 87.</p>
<p>05 - The instantiation of <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a> in the variable inputs(1) is done with an integer argument of (1) to indicate the constructor should build inputs with a pair of system parameters and read in values for them. An argument of (0) would build an <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a> that was empty and would obligate the programmer to build a list of Params explicitly.</p>
<p>07 - The version of the code is stored within the <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a>. Note the optional use of RCS keyword substitution. See the "co" man page for details. This allows the code to be automatically updated.</p>
<p>08-11 - The create member function of <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a> builds, in this case, a parameter called xyfile, immediately filled with the <a class="el" href="classcasacore_1_1String.html" title="String: the storage and methods of handling collections of characters.">String</a> containing the directory that holds the data. The help <a class="el" href="classcasacore_1_1String.html" title="String: the storage and methods of handling collections of characters.">String</a> is useful for new users or prompting. The fourth argument of InFile is the optional type of the parameter's value. Any suitable <a class="el" href="classcasacore_1_1String.html" title="String: the storage and methods of handling collections of characters.">String</a> may be used. Missing from this example are the optional fifth and sixth arguments, the parameter's value's range and units, respectively.</p>
<p>12 - This is another instantiation of a <a class="el" href="classcasacore_1_1Param.html" title="A simple keyword/value pair with internal help Strings.">Param</a> inside of <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a>. This parameter will be referenced by the keyword "overplot". It is initialized to False and is of type Bool.</p>
<p>13 - This line is the third and final <a class="el" href="classcasacore_1_1Param.html" title="A simple keyword/value pair with internal help Strings.">Param</a> placed in inputs and is recognized by the code when accessed with keyword "lines".</p>
<p>16 - The call of readArguments(argc, argv) should be done after the list of Params has been completed. This line of code fills the values from the command line. A keyword that doesn't match will throw an error.</p>
<p>19 - At this point the local variable filename is initialized to the <a class="el" href="classcasacore_1_1String.html" title="String: the storage and methods of handling collections of characters.">String</a> value held within the parameter accessed through the key "xyfile". Recall that the value of xyfile was originally set to "/tmp/xy.aipsio" but would be replaced with the proper value at execution. The getString member function returns either the default value specified during the xyfile parameter's instantiation or the value placed into it from the command line use of xyfile=myfile.</p>
<p>25 - Here the boolean value of the <a class="el" href="classcasacore_1_1Param.html" title="A simple keyword/value pair with internal help Strings.">Param</a> called lines is inserted into the call to the function plot.</p>
<p>29 - Again the <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a> interface has its parameter called overplot return a boolean to be used as a test for an "if". The getBool(key) <a class="el" href="classcasacore_1_1Input.html" title="Input.h: A simple command-line argument method for applications.">Input</a> member function may be reading the default value of the appropriate parameter called key or using the value passed from the command line.</p>
<p>30 &amp; 33 - Another call to plot that uses the boolean value stored in the parameter called lines.</p>
<h3>Motivation</h3>
<p>This module fit the early needs of a a simple user interface.</p>
<h3>To Do</h3>
<ul>
<li>
possibly replace the <a class="el" href="classcasacore_1_1Param.html" title="A simple keyword/value pair with internal help Strings.">Param</a> class with Keywords </li>
</ul>
<p><a class="anchor" id="Inputs_module_Class_List"></a> </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 1 2015 15:43:42 for casacore by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
