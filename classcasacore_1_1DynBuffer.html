<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>casacore: casacore::DynBuffer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">casacore
   &#160;<span id="projectnumber">$Rev$</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecasacore.html">casacore</a></li><li class="navelem"><a class="el" href="classcasacore_1_1DynBuffer.html">DynBuffer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classcasacore_1_1DynBuffer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">casacore::DynBuffer Class Reference<div class="ingroups"><a class="el" href="group__Utilities__module.html">Utilities_module</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Store data in dynamically allocated buffers.  
 <a href="classcasacore_1_1DynBuffer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="DynBuffer_8h_source.html">DynBuffer.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acc93e7e69c8b6937d8fd9e166675a867"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#acc93e7e69c8b6937d8fd9e166675a867">DynBuffer</a> (<a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> nrOfBytes=4096)</td></tr>
<tr class="memdesc:acc93e7e69c8b6937d8fd9e166675a867"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a first buffer of the specified number of bytes (default 4096).  <a href="#acc93e7e69c8b6937d8fd9e166675a867"></a><br/></td></tr>
<tr class="memitem:a77b4fb678379436acba78ccd7f465dcd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#a77b4fb678379436acba78ccd7f465dcd">~DynBuffer</a> ()</td></tr>
<tr class="memdesc:a77b4fb678379436acba78ccd7f465dcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the whole buffer, i.e.  <a href="#a77b4fb678379436acba78ccd7f465dcd"></a><br/></td></tr>
<tr class="memitem:abcbb0e113c40bb48a4c2fc71d89023d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#abcbb0e113c40bb48a4c2fc71d89023d7">allocstart</a> ()</td></tr>
<tr class="memdesc:abcbb0e113c40bb48a4c2fc71d89023d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare for storing data (re-initialize the buffer)  <a href="#abcbb0e113c40bb48a4c2fc71d89023d7"></a><br/></td></tr>
<tr class="memitem:a024bfa17f17d7838c7846ab9bf62f61e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#a024bfa17f17d7838c7846ab9bf62f61e">alloc</a> (<a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> nrOfValues, <a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> valueSize, <a class="el" href="namespacecasacore.html#aee8247dad3ca180405bdb6835513a5ad">Char</a> *&amp;ptr)</td></tr>
<tr class="memdesc:a024bfa17f17d7838c7846ab9bf62f61e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate buffer space for <code>nrOfValues</code> values of size <code>valueSize</code> bytes, and return the pointer <code>ptr</code> to the buffer and the number of values that fit in the buffer.  <a href="#a024bfa17f17d7838c7846ab9bf62f61e"></a><br/></td></tr>
<tr class="memitem:a92feba3b577739adb604c12751969336"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#a92feba3b577739adb604c12751969336">remove</a> (<a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> nrOfBuffer=1)</td></tr>
<tr class="memdesc:a92feba3b577739adb604c12751969336"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove buffer <code>nrOfBuffer</code> and the buffers appended to it, and re-initialize the current buffer.  <a href="#a92feba3b577739adb604c12751969336"></a><br/></td></tr>
<tr class="memitem:af0d426d79c9a8535fa8051f274c9a521"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#af0d426d79c9a8535fa8051f274c9a521">nextstart</a> ()</td></tr>
<tr class="memdesc:af0d426d79c9a8535fa8051f274c9a521"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare for data retrieval (set up for looping through the buffers).  <a href="#af0d426d79c9a8535fa8051f274c9a521"></a><br/></td></tr>
<tr class="memitem:aaf9c5741b570ade2f7ce2680b65ebab3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#aaf9c5741b570ade2f7ce2680b65ebab3">next</a> (<a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> &amp;usedLength, <a class="el" href="namespacecasacore.html#aee8247dad3ca180405bdb6835513a5ad">Char</a> *&amp;ptr)</td></tr>
<tr class="memdesc:aaf9c5741b570ade2f7ce2680b65ebab3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the pointer to the next buffer and its used length in bytes.  <a href="#aaf9c5741b570ade2f7ce2680b65ebab3"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a827d8fdcda6bb7c04de2fe746d14643a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#a827d8fdcda6bb7c04de2fe746d14643a">newbuf</a> (<a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> nrOfValues, <a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> valueSize)</td></tr>
<tr class="memdesc:a827d8fdcda6bb7c04de2fe746d14643a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the next buffer for storing <code>nrOfValues</code> values of size <code>valueSize</code> bytes, and return the number of values that can be stored in the free space of that buffer (maybe less than <code>nrOfValues</code>).  <a href="#a827d8fdcda6bb7c04de2fe746d14643a"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a158c4e2f5ddd04c797b2b4210b3c54bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#a158c4e2f5ddd04c797b2b4210b3c54bc">bufsz_p</a></td></tr>
<tr class="memdesc:a158c4e2f5ddd04c797b2b4210b3c54bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">size of 1st buffer and min.  <a href="#a158c4e2f5ddd04c797b2b4210b3c54bc"></a><br/></td></tr>
<tr class="memitem:a4bfce6d926e834e3e89a4fa5243d28e9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#a4bfce6d926e834e3e89a4fa5243d28e9">nextbuf_p</a></td></tr>
<tr class="memdesc:a4bfce6d926e834e3e89a4fa5243d28e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">buffernr for next function  <a href="#a4bfce6d926e834e3e89a4fa5243d28e9"></a><br/></td></tr>
<tr class="memitem:ab36cd37ac50833c1ccdae06511c0e4b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#ab36cd37ac50833c1ccdae06511c0e4b9">curbuf_p</a></td></tr>
<tr class="memdesc:ab36cd37ac50833c1ccdae06511c0e4b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">current buffernr  <a href="#ab36cd37ac50833c1ccdae06511c0e4b9"></a><br/></td></tr>
<tr class="memitem:aa1646d2a76363d8d924b89d84ef5bc98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#aa1646d2a76363d8d924b89d84ef5bc98">nrbuf_p</a></td></tr>
<tr class="memdesc:aa1646d2a76363d8d924b89d84ef5bc98"><td class="mdescLeft">&#160;</td><td class="mdescRight">nr of buffers allocated  <a href="#aa1646d2a76363d8d924b89d84ef5bc98"></a><br/></td></tr>
<tr class="memitem:aaa78ea1a9aef681d278161b93492da39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#aaa78ea1a9aef681d278161b93492da39">maxnrbuf_p</a></td></tr>
<tr class="memdesc:aaa78ea1a9aef681d278161b93492da39"><td class="mdescLeft">&#160;</td><td class="mdescRight">size of Blocks  <a href="#aaa78ea1a9aef681d278161b93492da39"></a><br/></td></tr>
<tr class="memitem:afa2c10aa95a8710a50cd189a1347cb4e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#afa2c10aa95a8710a50cd189a1347cb4e">uselen_p</a></td></tr>
<tr class="memdesc:afa2c10aa95a8710a50cd189a1347cb4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">used length per buffer  <a href="#afa2c10aa95a8710a50cd189a1347cb4e"></a><br/></td></tr>
<tr class="memitem:a8087e1f8944513e6bc9254d0b2878780"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#a8087e1f8944513e6bc9254d0b2878780">totlen_p</a></td></tr>
<tr class="memdesc:a8087e1f8944513e6bc9254d0b2878780"><td class="mdescLeft">&#160;</td><td class="mdescRight">total length per buffer  <a href="#a8087e1f8944513e6bc9254d0b2878780"></a><br/></td></tr>
<tr class="memitem:ad34b7fe7d22e3d09c28fb9b0150ac9c4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcasacore_1_1PtrBlock.html">PtrBlock</a>&lt; <a class="el" href="namespacecasacore.html#aee8247dad3ca180405bdb6835513a5ad">Char</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#ad34b7fe7d22e3d09c28fb9b0150ac9c4">bufptr_p</a></td></tr>
<tr class="memdesc:ad34b7fe7d22e3d09c28fb9b0150ac9c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to buffer  <a href="#ad34b7fe7d22e3d09c28fb9b0150ac9c4"></a><br/></td></tr>
<tr class="memitem:ad1f43341405756360cc9fda27fd18d7f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#ad1f43341405756360cc9fda27fd18d7f">curuselen_p</a></td></tr>
<tr class="memdesc:ad1f43341405756360cc9fda27fd18d7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">used length of current buffer  <a href="#ad1f43341405756360cc9fda27fd18d7f"></a><br/></td></tr>
<tr class="memitem:af40d6d307228b011544ef60ffca35862"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#af40d6d307228b011544ef60ffca35862">curtotlen_p</a></td></tr>
<tr class="memdesc:af40d6d307228b011544ef60ffca35862"><td class="mdescLeft">&#160;</td><td class="mdescRight">total length of current buffer  <a href="#af40d6d307228b011544ef60ffca35862"></a><br/></td></tr>
<tr class="memitem:a78cdeeb53f8d8a9b96400ee6216d2924"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecasacore.html#aee8247dad3ca180405bdb6835513a5ad">Char</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DynBuffer.html#a78cdeeb53f8d8a9b96400ee6216d2924">curbufptr_p</a></td></tr>
<tr class="memdesc:a78cdeeb53f8d8a9b96400ee6216d2924"><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to current buffer  <a href="#a78cdeeb53f8d8a9b96400ee6216d2924"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Store data in dynamically allocated buffers. </p>
<pre class="fragment">@anchor DynBuffer_summary  
</pre> <h3>Intended use:</h3>
<p>Public interface </p>
<h3>Review Status</h3>
<dl>
<dt>Reviewed By:</dt>
<dd>Friso Olnon</dd>
<dt>Date Reviewed:</dt>
<dd>1995/03/16</dd>
<dt>Test programs:</dt>
<dd>tDynBuffer</dd>
</dl>
<h3>Synopsis</h3>
<p><a class="el" href="classcasacore_1_1DynBuffer.html" title="Store data in dynamically allocated buffers.">DynBuffer</a> allows one to store data in dynamically allocated buffers. When a buffer is full, an additional buffer can be allocated and "linked" to the existing one; so, the data may not be stored contiguously You can loop through all the linked buffers and get their individual addresses and sizes, so that you can access the data.</p>
<h3>Example</h3>
<p><a class="anchor" id="DynBuffer_example"></a> Example (without exception handling): </p>
<div class="fragment"><div class="line"><a class="code" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> nrOfValues, nrNeeded, nrAvailable;<span class="comment">// nr of data values</span></div>
<div class="line"><span class="keywordtype">float</span>* pData = floatarr;               <span class="comment">// ptr to data to be handled</span></div>
<div class="line"><a class="code" href="namespacecasacore.html#aee8247dad3ca180405bdb6835513a5ad">Char</a>* pBuffer;                         <span class="comment">// ptr to buffer</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="classcasacore_1_1DynBuffer.html#acc93e7e69c8b6937d8fd9e166675a867" title="Allocate a first buffer of the specified number of bytes (default 4096).">DynBuffer</a> buffer;                      <span class="comment">// create buffer</span></div>
<div class="line">buffer.allocstart();                   <span class="comment">// prepare for storing</span></div>
<div class="line">nrNeeded = nrOfValues;                 <span class="comment">// nr of values to store</span></div>
<div class="line"><span class="comment">// copy data into dynamic buffer</span></div>
<div class="line"><span class="keywordflow">while</span> (nrNeeded &gt; 0) {</div>
<div class="line">nrAvailable = buffer.alloc (nrNeeded, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>), pBuffer);</div>
<div class="line"><span class="comment">// get buffer space:</span></div>
<div class="line"><span class="comment">// room for nrAvailable values</span></div>
<div class="line">memcpy (pBuffer, pData, nrAvailable*<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>));</div>
<div class="line"><span class="comment">// copy that many data values</span></div>
<div class="line">nrNeeded -= nrAvailable;           <span class="comment">// how much more needed?</span></div>
<div class="line">pData += nrAvailable;              <span class="comment">// pointer to as yet unstored data</span></div>
<div class="line">}</div>
<div class="line"><span class="comment">// Maybe store more values</span></div>
<div class="line">.</div>
<div class="line">.</div>
<div class="line"><span class="comment">// Retrieve all the data values from the buffers and write them</span></div>
<div class="line">buffer.nextstart();                    <span class="comment">// goto buffer start</span></div>
<div class="line"><span class="keywordflow">while</span> (buffer.next (nrAvailable, pBuffer)) {</div>
<div class="line"><span class="comment">// get next buffer</span></div>
<div class="line">write (fd, nrAvailable, pBuffer);  <span class="comment">// write data from that buffer</span></div>
<div class="line">}</div>
</div><!-- fragment --><h3>Motivation</h3>
<p>This class is developed as an intermediate buffer for class <a class="el" href="classcasacore_1_1AipsIO.html">AipsIO </a> , but it may serve other purposes as well. </p>

<p>Definition at line <a class="el" href="DynBuffer_8h_source.html#l00092">92</a> of file <a class="el" href="DynBuffer_8h_source.html">DynBuffer.h</a>.</p>
</div><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="acc93e7e69c8b6937d8fd9e166675a867"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">casacore::DynBuffer::DynBuffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td>
          <td class="paramname"><em>nrOfBytes</em> = <code>4096</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a first buffer of the specified number of bytes (default 4096). </p>
<p>When the allocation fails, an exception is thrown. </p>

</div>
</div>
<a class="anchor" id="a77b4fb678379436acba78ccd7f465dcd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">casacore::DynBuffer::~DynBuffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove the whole buffer, i.e. </p>
<p>the first buffer and all the buffers appended to it. </p>

</div>
</div>
<h2>Member Function Documentation</h2>
<a class="anchor" id="a024bfa17f17d7838c7846ab9bf62f61e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> casacore::DynBuffer::alloc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td>
          <td class="paramname"><em>nrOfValues</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td>
          <td class="paramname"><em>valueSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#aee8247dad3ca180405bdb6835513a5ad">Char</a> *&amp;&#160;</td>
          <td class="paramname"><em>ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate buffer space for <code>nrOfValues</code> values of size <code>valueSize</code> bytes, and return the pointer <code>ptr</code> to the buffer and the number of values that fit in the buffer. </p>
<p>When not all values fit in the current buffer, new buffer space is added (probably non-contiguous). If that allocation fails an exception is thrown. </p>

<p>Definition at line <a class="el" href="DynBuffer_8h_source.html#l00177">177</a> of file <a class="el" href="DynBuffer_8h_source.html">DynBuffer.h</a>.</p>

<p>References <a class="el" href="DynBuffer_8h_source.html#l00168">curbufptr_p</a>, <a class="el" href="DynBuffer_8h_source.html#l00166">curtotlen_p</a>, <a class="el" href="DynBuffer_8h_source.html#l00164">curuselen_p</a>, and <a class="el" href="classcasacore_1_1DynBuffer.html#a827d8fdcda6bb7c04de2fe746d14643a">newbuf()</a>.</p>

</div>
</div>
<a class="anchor" id="abcbb0e113c40bb48a4c2fc71d89023d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void casacore::DynBuffer::allocstart </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare for storing data (re-initialize the buffer) </p>

</div>
</div>
<a class="anchor" id="a827d8fdcda6bb7c04de2fe746d14643a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> casacore::DynBuffer::newbuf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td>
          <td class="paramname"><em>nrOfValues</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td>
          <td class="paramname"><em>valueSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the next buffer for storing <code>nrOfValues</code> values of size <code>valueSize</code> bytes, and return the number of values that can be stored in the free space of that buffer (maybe less than <code>nrOfValues</code>). </p>
<p>The new current buffer can be the present one (if it has free space), the next buffer already allocated (if there is one), or a newly allocated and linked-in buffer. If, in the last case, the allocation fails an exception is thrown. </p>

<p>Referenced by <a class="el" href="DynBuffer_8h_source.html#l00177">alloc()</a>.</p>

</div>
</div>
<a class="anchor" id="aaf9c5741b570ade2f7ce2680b65ebab3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> casacore::DynBuffer::next </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> &amp;&#160;</td>
          <td class="paramname"><em>usedLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#aee8247dad3ca180405bdb6835513a5ad">Char</a> *&amp;&#160;</td>
          <td class="paramname"><em>ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the pointer to the next buffer and its used length in bytes. </p>
<p>The function returns a <code>False</code> value if there are no more buffers. </p>

</div>
</div>
<a class="anchor" id="af0d426d79c9a8535fa8051f274c9a521"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void casacore::DynBuffer::nextstart </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare for data retrieval (set up for looping through the buffers). </p>

</div>
</div>
<a class="anchor" id="a92feba3b577739adb604c12751969336"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void casacore::DynBuffer::remove </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&#160;</td>
          <td class="paramname"><em>nrOfBuffer</em> = <code>1</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove buffer <code>nrOfBuffer</code> and the buffers appended to it, and re-initialize the current buffer. </p>
<p>By default we keep the first buffer (i.e. the one numbered 0).</p>
<p>The idea is that you may want to free intermediate storage space taken up by data that you no longer need, and that the first buffer is often big enough to hold further data. So, you only remove the first buffer in special cases. </p>

</div>
</div>
<h2>Member Data Documentation</h2>
<a class="anchor" id="ad34b7fe7d22e3d09c28fb9b0150ac9c4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcasacore_1_1PtrBlock.html">PtrBlock</a>&lt;<a class="el" href="namespacecasacore.html#aee8247dad3ca180405bdb6835513a5ad">Char</a>*&gt; casacore::DynBuffer::bufptr_p</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>pointer to buffer </p>

<p>Definition at line <a class="el" href="DynBuffer_8h_source.html#l00162">162</a> of file <a class="el" href="DynBuffer_8h_source.html">DynBuffer.h</a>.</p>

</div>
</div>
<a class="anchor" id="a158c4e2f5ddd04c797b2b4210b3c54bc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> casacore::DynBuffer::bufsz_p</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>size of 1st buffer and min. </p>
<p>bufsize </p>

<p>Definition at line <a class="el" href="DynBuffer_8h_source.html#l00148">148</a> of file <a class="el" href="DynBuffer_8h_source.html">DynBuffer.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab36cd37ac50833c1ccdae06511c0e4b9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> casacore::DynBuffer::curbuf_p</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>current buffernr </p>

<p>Definition at line <a class="el" href="DynBuffer_8h_source.html#l00152">152</a> of file <a class="el" href="DynBuffer_8h_source.html">DynBuffer.h</a>.</p>

</div>
</div>
<a class="anchor" id="a78cdeeb53f8d8a9b96400ee6216d2924"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#aee8247dad3ca180405bdb6835513a5ad">Char</a>* casacore::DynBuffer::curbufptr_p</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>pointer to current buffer </p>

<p>Definition at line <a class="el" href="DynBuffer_8h_source.html#l00168">168</a> of file <a class="el" href="DynBuffer_8h_source.html">DynBuffer.h</a>.</p>

<p>Referenced by <a class="el" href="DynBuffer_8h_source.html#l00177">alloc()</a>.</p>

</div>
</div>
<a class="anchor" id="af40d6d307228b011544ef60ffca35862"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> casacore::DynBuffer::curtotlen_p</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>total length of current buffer </p>

<p>Definition at line <a class="el" href="DynBuffer_8h_source.html#l00166">166</a> of file <a class="el" href="DynBuffer_8h_source.html">DynBuffer.h</a>.</p>

<p>Referenced by <a class="el" href="DynBuffer_8h_source.html#l00177">alloc()</a>.</p>

</div>
</div>
<a class="anchor" id="ad1f43341405756360cc9fda27fd18d7f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> casacore::DynBuffer::curuselen_p</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>used length of current buffer </p>

<p>Definition at line <a class="el" href="DynBuffer_8h_source.html#l00164">164</a> of file <a class="el" href="DynBuffer_8h_source.html">DynBuffer.h</a>.</p>

<p>Referenced by <a class="el" href="DynBuffer_8h_source.html#l00177">alloc()</a>.</p>

</div>
</div>
<a class="anchor" id="aaa78ea1a9aef681d278161b93492da39"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> casacore::DynBuffer::maxnrbuf_p</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>size of Blocks </p>

<p>Definition at line <a class="el" href="DynBuffer_8h_source.html#l00156">156</a> of file <a class="el" href="DynBuffer_8h_source.html">DynBuffer.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4bfce6d926e834e3e89a4fa5243d28e9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> casacore::DynBuffer::nextbuf_p</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>buffernr for next function </p>

<p>Definition at line <a class="el" href="DynBuffer_8h_source.html#l00150">150</a> of file <a class="el" href="DynBuffer_8h_source.html">DynBuffer.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa1646d2a76363d8d924b89d84ef5bc98"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> casacore::DynBuffer::nrbuf_p</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>nr of buffers allocated </p>

<p>Definition at line <a class="el" href="DynBuffer_8h_source.html#l00154">154</a> of file <a class="el" href="DynBuffer_8h_source.html">DynBuffer.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8087e1f8944513e6bc9254d0b2878780"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcasacore_1_1Block.html">Block</a>&lt;<a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&gt; casacore::DynBuffer::totlen_p</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>total length per buffer </p>

<p>Definition at line <a class="el" href="DynBuffer_8h_source.html#l00160">160</a> of file <a class="el" href="DynBuffer_8h_source.html">DynBuffer.h</a>.</p>

</div>
</div>
<a class="anchor" id="afa2c10aa95a8710a50cd189a1347cb4e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcasacore_1_1Block.html">Block</a>&lt;<a class="el" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>&gt; casacore::DynBuffer::uselen_p</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>used length per buffer </p>

<p>Definition at line <a class="el" href="DynBuffer_8h_source.html#l00158">158</a> of file <a class="el" href="DynBuffer_8h_source.html">DynBuffer.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>casa/Utilities/<a class="el" href="DynBuffer_8h_source.html">DynBuffer.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 1 2015 15:43:46 for casacore by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
