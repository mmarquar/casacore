<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>casacore: casacore::TableExprData Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">casacore
   &#160;<span id="projectnumber">$Rev$</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecasacore.html">casacore</a></li><li class="navelem"><a class="el" href="classcasacore_1_1TableExprData.html">TableExprData</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classcasacore_1_1TableExprData-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">casacore::TableExprData Class Reference<div class="ingroups"><a class="el" href="group__TaQL__module.html">TaQL_module</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Abstract base class for data object in a TaQL expression.  
 <a href="classcasacore_1_1TableExprData.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="TableExprData_8h_source.html">TableExprData.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for casacore::TableExprData:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classcasacore_1_1TableExprData.png" usemap="#casacore::TableExprData_map" alt=""/>
  <map id="casacore::TableExprData_map" name="casacore::TableExprData_map">
<area href="classcasacore_1_1LogFilterExpr.html" title="Class to deal with a TaQL expression to filter messages." alt="casacore::LogFilterExpr" shape="rect" coords="0,56,154,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8cb2d5d514f39d95777a89d54c47a84a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1TableExprData.html#a8cb2d5d514f39d95777a89d54c47a84a">TableExprData</a> ()</td></tr>
<tr class="memdesc:a8cb2d5d514f39d95777a89d54c47a84a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct it from a row number.  <a href="#a8cb2d5d514f39d95777a89d54c47a84a"></a><br/></td></tr>
<tr class="memitem:a1d5ec54393c9cd1909ea3aecc7007cae"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1TableExprData.html#a1d5ec54393c9cd1909ea3aecc7007cae">~TableExprData</a> ()</td></tr>
<tr class="memitem:a2f91eec5b52fb3c9dd7b284edc74a14f"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classcasacore_1_1IPosition.html">IPosition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1TableExprData.html#a2f91eec5b52fb3c9dd7b284edc74a14f">shape</a> (const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;fieldNrs) const </td></tr>
<tr class="memdesc:a2f91eec5b52fb3c9dd7b284edc74a14f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the shape of the given field.  <a href="#a2f91eec5b52fb3c9dd7b284edc74a14f"></a><br/></td></tr>
<tr class="memitem:af67cc17604cf3805ad9daf32d0f4686b"><td class="memItemLeft" align="right" valign="top">virtual DataType&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1TableExprData.html#af67cc17604cf3805ad9daf32d0f4686b">dataType</a> (const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;fieldNrs) const =0</td></tr>
<tr class="memdesc:af67cc17604cf3805ad9daf32d0f4686b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the data type of the given field.  <a href="#af67cc17604cf3805ad9daf32d0f4686b"></a><br/></td></tr>
<tr class="memitem:a9a4dcd1cff8e5b0a25c90783f7fce183"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1TableExprData.html#a9a4dcd1cff8e5b0a25c90783f7fce183">getBool</a> (const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;fieldNrs) const </td></tr>
<tr class="memdesc:a9a4dcd1cff8e5b0a25c90783f7fce183"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a scalar in the given type.  <a href="#a9a4dcd1cff8e5b0a25c90783f7fce183"></a><br/></td></tr>
<tr class="memitem:a9ad7f0e1e5a93f2cd5d7f59641282345"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacecasacore.html#a79c2dfec4363785472512dbf384675a1">Int64</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1TableExprData.html#a9ad7f0e1e5a93f2cd5d7f59641282345">getInt</a> (const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;fieldNrs) const </td></tr>
<tr class="memitem:ae2c19b5322de19169273580cb05c834f"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacecasacore.html#ada1f75eb2b38067e3eb1af7f5d69ebb2">Double</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1TableExprData.html#ae2c19b5322de19169273580cb05c834f">getDouble</a> (const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;fieldNrs) const </td></tr>
<tr class="memitem:a82b38cc8cdb31402c1bfb2a2b7f510f8"><td class="memItemLeft" align="right" valign="top">virtual DComplex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1TableExprData.html#a82b38cc8cdb31402c1bfb2a2b7f510f8">getDComplex</a> (const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;fieldNrs) const </td></tr>
<tr class="memitem:a03a376c1658f096400e6175bcc20e705"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classcasacore_1_1String.html">String</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1TableExprData.html#a03a376c1658f096400e6175bcc20e705">getString</a> (const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;fieldNrs) const </td></tr>
<tr class="memitem:a2d65c4fa3d25c04cec1a60d9eca87681"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classcasacore_1_1Array.html">Array</a>&lt; <a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1TableExprData.html#a2d65c4fa3d25c04cec1a60d9eca87681">getArrayBool</a> (const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;fieldNrs) const </td></tr>
<tr class="memdesc:a2d65c4fa3d25c04cec1a60d9eca87681"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an array in the given type.  <a href="#a2d65c4fa3d25c04cec1a60d9eca87681"></a><br/></td></tr>
<tr class="memitem:a104056e6de80fc06dcfa9afd97388df1"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classcasacore_1_1Array.html">Array</a>&lt; <a class="el" href="namespacecasacore.html#a79c2dfec4363785472512dbf384675a1">Int64</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1TableExprData.html#a104056e6de80fc06dcfa9afd97388df1">getArrayInt</a> (const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;fieldNrs) const </td></tr>
<tr class="memitem:ad3724c949de994223c299fcf59a2a769"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classcasacore_1_1Array.html">Array</a>&lt; <a class="el" href="namespacecasacore.html#ada1f75eb2b38067e3eb1af7f5d69ebb2">Double</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1TableExprData.html#ad3724c949de994223c299fcf59a2a769">getArrayDouble</a> (const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;fieldNrs) const </td></tr>
<tr class="memitem:abcfdbf59540c83757ef473833a423f07"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classcasacore_1_1Array.html">Array</a>&lt; DComplex &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1TableExprData.html#abcfdbf59540c83757ef473833a423f07">getArrayDComplex</a> (const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;fieldNrs) const </td></tr>
<tr class="memitem:ab9ad96c642c5f9dc24cc9764f9293c34"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classcasacore_1_1Array.html">Array</a>&lt; <a class="el" href="classcasacore_1_1String.html">String</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1TableExprData.html#ab9ad96c642c5f9dc24cc9764f9293c34">getArrayString</a> (const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;fieldNrs) const </td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Abstract base class for data object in a TaQL expression. </p>
<pre class="fragment"> @anchor TableExprData_summary  
</pre> <h3>Intended use:</h3>
<p>Public interface</p>
<h3>Review Status</h3>
<dl>
<dt>Reviewed By:</dt>
<dd>UNKNOWN</dd>
<dt>Date Reviewed:</dt>
<dd>before2004/08/25</dd>
</dl>
<h3>Prerequisite</h3>
<ul>
<li>
<a class="el" href="classcasacore_1_1TableExprNode.html">TableExprNode </a> . </li>
</ul>
<h3>Synopsis</h3>
<p>The <a class="el" href="classcasacore_1_1Table.html" title="Main interface class to a read/write table.">Table</a> Query Language (TaQL) is implemented by means of the <code><a class="el" href="classcasacore_1_1TableExprNode.html" title="Handle class for a table column expression tree.">TableExprNode</a></code> classes. It is primarily meant to do selection on tables. However, it is also possible to use it for selection on any other set of data resembling tabular data. <br/>
An example of such a data set is a set of <a class="el" href="classcasacore_1_1Record.html">Record </a> objects. TaQL can be used to select some of those records based on the contents of one or more fields in the records. Note that this example is already directly supported by TaQL. <br/>
Another example is when a user has several equally long vectors with data. The vectors can be seen as fields and TaQL can be used to select entries from the vectors. This example requires that this class <a class="el" href="classcasacore_1_1TableExprData.html" title="Abstract base class for data object in a TaQL expression.">TableExprData</a> is used. </p>
<p>The <a class="el" href="classcasacore_1_1TableExprNodeRecordField.html">TableExprNodeRecordField </a> and <a class="el" href="classcasacore_1_1TableExprId.html">TableExprId </a> classes form the means by which TaQL can deal with any set of data. <br/>
First the TaQL expression has to be setup. This is done by constructing a <code><a class="el" href="classcasacore_1_1TableExprNodeRecordField.html" title="Scalar field in record select expression tree.">TableExprNodeRecordField</a></code> object for each 'field' to be used in the expression. <code><a class="el" href="classcasacore_1_1TableExprNodeRecordField.html" title="Scalar field in record select expression tree.">TableExprNodeRecordField</a></code> uses a <a class="el" href="classcasacore_1_1RecordInterface.html">RecordInterface </a> object to make the data type of a field in the data set known and to map a field name to a field index (the index is the sequence number of the field in the record description). <br/>
When evaluating the expression for each member in the data set, a <code><a class="el" href="classcasacore_1_1TableExprData.html" title="Abstract base class for data object in a TaQL expression.">TableExprData</a>&gt;</code> needs to be passed (which is automatically converted to <a class="el" href="classcasacore_1_1TableExprId.html">TableExprId </a> ). So a class needs to be written to access the data in the data set. It needs to be derived from the abstract base class <code><a class="el" href="classcasacore_1_1TableExprData.html" title="Abstract base class for data object in a TaQL expression.">TableExprData</a></code> defined in this file. An example is given below. </p>
<p>It is also possible that the data set contains records and that the selection is based on fields in those records. In such a case the record passed to <code><a class="el" href="classcasacore_1_1TableExprNodeRecordField.html" title="Scalar field in record select expression tree.">TableExprNodeRecordField</a></code> should contain subrecords representing those records. The field index in the various functions as passed as a <code><a class="el" href="classcasacore_1_1Block.html" title="simple 1-D array">Block</a>&lt;Int&gt;</code> to denote the fields in the subrecords (and possibly subsubrecords, etc.. However, normally records won't be used and <code>fieldNrs[0]</code> gives the field index.</p>
<h3>Example</h3>
<p><a class="anchor" id="TableExprData_example"></a> This example shows how a data set consisting of two vectors of scalars can be used. </p>
<div class="fragment"><div class="line"><span class="comment">// Write a class derived from TableExprData to handle the vectors.</span></div>
<div class="line"><span class="keyword">class </span>MyTestClass : <span class="keyword">public</span> <a class="code" href="classcasacore_1_1TableExprData.html#a8cb2d5d514f39d95777a89d54c47a84a" title="Construct it from a row number.">TableExprData</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"><span class="comment">// Constructor checks if both vectors have equal length.</span></div>
<div class="line">MyTestClass (<span class="keyword">const</span> Vector&lt;Int&gt;&amp; fld1, <span class="keyword">const</span> Vector&lt;String&gt;&amp; fld2)</div>
<div class="line">: itsFld1(fld1), itsFld2(fld2), itsEntry(0)</div>
<div class="line">{ <a class="code" href="Assert_8h.html#a3630afed5d5376567ad23703d3676be3" title="These marcos are provided for use instead of simply using the constructors of assert_ to allow additi...">AlwaysAssert</a> (fld1.nelements() == fld2.nelements(), AipsError); }</div>
<div class="line"><span class="keyword">virtual</span> ~MyTestClass()</div>
<div class="line">{}</div>
<div class="line"><span class="keywordtype">void</span> next()</div>
<div class="line">{ itsEntry++; }</div>
<div class="line"><span class="comment">// Note that only the get functions for the possible types are needed.</span></div>
<div class="line"><span class="comment">// Also note that all numeric types are handled by TaQL as Double.</span></div>
<div class="line"><span class="comment">// The exception should never be thrown unless things are screwed up.</span></div>
<div class="line"><span class="keyword">virtual</span> <a class="code" href="namespacecasacore.html#ada1f75eb2b38067e3eb1af7f5d69ebb2">Double</a> <a class="code" href="classcasacore_1_1TableExprData.html#ae2c19b5322de19169273580cb05c834f">getDouble</a> (<span class="keyword">const</span> Block&lt;Int&gt;&amp; fieldNrs)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{ <span class="keywordflow">switch</span> (fieldNrs[0]) {</div>
<div class="line"><span class="keywordflow">case</span> 0:</div>
<div class="line"><span class="keywordflow">return</span> itsFld1(itsEntry);</div>
<div class="line"><span class="keywordflow">default</span>:</div>
<div class="line"><span class="keywordflow">throw</span> AipsError();</div>
<div class="line">}</div>
<div class="line">}</div>
<div class="line"><span class="keyword">virtual</span> String <a class="code" href="classcasacore_1_1TableExprData.html#a03a376c1658f096400e6175bcc20e705">getString</a> (<span class="keyword">const</span> Block&lt;Int&gt;&amp; fieldNrs)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{ <span class="keywordflow">switch</span> (fieldNrs[0]) {</div>
<div class="line"><span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="keywordflow">return</span> itsFld2(itsEntry);</div>
<div class="line"><span class="keywordflow">default</span>:</div>
<div class="line"><span class="keywordflow">throw</span> AipsError();</div>
<div class="line">}</div>
<div class="line">}</div>
<div class="line"><span class="keyword">virtual</span> DataType <a class="code" href="classcasacore_1_1TableExprData.html#af67cc17604cf3805ad9daf32d0f4686b" title="Get the data type of the given field.">dataType</a> (<span class="keyword">const</span> Block&lt;Int&gt;&amp; fieldNrs)<span class="keyword"> const</span></div>
<div class="line"><span class="keyword"></span>{ <span class="keywordflow">switch</span> (fieldNrs[0]) {</div>
<div class="line"><span class="keywordflow">case</span> 0:</div>
<div class="line"><span class="keywordflow">return</span> TpInt;</div>
<div class="line"><span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="keywordflow">return</span> TpString;</div>
<div class="line"><span class="keywordflow">default</span>:</div>
<div class="line"><span class="keywordflow">throw</span> AipsError();</div>
<div class="line">}</div>
<div class="line">}</div>
<div class="line"><span class="comment">// Make a Record to give to vectors a name.</span></div>
<div class="line"><span class="comment">// The order in which the fields are defined determines the fieldnrs</span></div>
<div class="line"><span class="comment">// passed to the get functions.</span></div>
<div class="line"><span class="keyword">static</span> Record makeRecord()</div>
<div class="line">{ RecordDesc desc;</div>
<div class="line">desc.addField (<span class="stringliteral">&quot;fld1&quot;</span>, TpInt);</div>
<div class="line">desc.addField (<span class="stringliteral">&quot;fld2&quot;</span>, TpString);</div>
<div class="line"><span class="keywordflow">return</span> Record(desc);</div>
<div class="line">}</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">Vector&lt;Int&gt;    itsFld1;</div>
<div class="line">Vector&lt;String&gt; itsFld2;</div>
<div class="line"><a class="code" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a>           itsEntry;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line">Vector&lt;uInt&gt; findMatches (<span class="keyword">const</span> Vector&lt;Int&gt;&amp; fld1,</div>
<div class="line"><span class="keyword">const</span> Vector&lt;String&gt;&amp; fld2)</div>
<div class="line">{</div>
<div class="line"><span class="comment">// Make some expression.</span></div>
<div class="line"><span class="comment">// First create a Record to make the names and types known.</span></div>
<div class="line">Record rec(MyTestClass::makeRecord());</div>
<div class="line">TableExprNode expr (makeRecordExpr(rec,<span class="stringliteral">&quot;fld1&quot;</span>) &gt; 10 &amp;&amp;</div>
<div class="line">makeRecordExpr(rec,<span class="stringliteral">&quot;fld2&quot;</span>) != <a class="code" href="namespacecasacore.html#a0d2a955b56ada3d73024058ac50b350f">pattern</a>(<span class="stringliteral">&quot;*xxx*&quot;</span>));</div>
<div class="line"><span class="comment">// Now evaluate the expression for each entry in the vector.</span></div>
<div class="line"><span class="comment">// Make a MyTestClass object to handle the vectors and put it in</span></div>
<div class="line"><span class="comment">// a TableExprId object for the TaQL evaluator.</span></div>
<div class="line"><span class="comment">// Note that TableExprId holds a pointer to the original MyTestClass</span></div>
<div class="line"><span class="comment">// object, so the TaQL evaluator &#39;sees&#39; the changes we make by</span></div>
<div class="line"><span class="comment">// using the its next() function.</span></div>
<div class="line">MyTestClass subj(fld1, fld2);</div>
<div class="line">TableExprId eid(subj);</div>
<div class="line"><span class="comment">// The matching entry numbers are stored in a vector.</span></div>
<div class="line">Vector&lt;uInt&gt; result(fld1.nelements());</div>
<div class="line"><a class="code" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> nr=0;</div>
<div class="line"><a class="code" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98" title="Define the standard types used by Casacore.">Bool</a> valb;</div>
<div class="line"><span class="keywordflow">for</span> (<a class="code" href="namespacecasacore.html#a5c559d8d8bf2ae7f67b439955d6be88a">uInt</a> i=0; i&lt;fld1.nelements(); i++) {</div>
<div class="line">expr.get (eid, valb);</div>
<div class="line"><span class="keywordflow">if</span> (valb) {</div>
<div class="line">result(nr++) = i;</div>
<div class="line">}</div>
<div class="line">subj.next();         <span class="comment">// Next time the next entry must be used</span></div>
<div class="line">}</div>
<div class="line">result.resize (nr, True);</div>
<div class="line"><span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
</div><!-- fragment --><h3>Motivation</h3>
<p>This class makes it possible that TaQL can be used in a very versatile way. </p>

<p>Definition at line <a class="el" href="TableExprData_8h_source.html#l00202">202</a> of file <a class="el" href="TableExprData_8h_source.html">TableExprData.h</a>.</p>
</div><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8cb2d5d514f39d95777a89d54c47a84a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">casacore::TableExprData::TableExprData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct it from a row number. </p>

<p>Definition at line <a class="el" href="TableExprData_8h_source.html#l00206">206</a> of file <a class="el" href="TableExprData_8h_source.html">TableExprData.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1d5ec54393c9cd1909ea3aecc7007cae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual casacore::TableExprData::~TableExprData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2>Member Function Documentation</h2>
<a class="anchor" id="af67cc17604cf3805ad9daf32d0f4686b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual DataType casacore::TableExprData::dataType </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fieldNrs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the data type of the given field. </p>
<p>Note that TpArray types have to be returned for arrays. If the field is unknown, TpOther should be returned. It is used for the isdefined function to check if the field is really defined. </p>

<p>Implemented in <a class="el" href="classcasacore_1_1LogFilterExpr.html#ae361aaeb44e37eb6df04ad5430106c8d">casacore::LogFilterExpr</a>.</p>

</div>
</div>
<a class="anchor" id="a2d65c4fa3d25c04cec1a60d9eca87681"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classcasacore_1_1Array.html">Array</a>&lt;<a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a>&gt; casacore::TableExprData::getArrayBool </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fieldNrs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get an array in the given type. </p>
<p>This might involve converting for Double and DComplex. Most default implementations throws an "not possible" exception. The default <code>getArrayDComplex</code> invokes <code>getArrayDouble</code>. </p>

</div>
</div>
<a class="anchor" id="abcfdbf59540c83757ef473833a423f07"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classcasacore_1_1Array.html">Array</a>&lt;DComplex&gt; casacore::TableExprData::getArrayDComplex </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fieldNrs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad3724c949de994223c299fcf59a2a769"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classcasacore_1_1Array.html">Array</a>&lt;<a class="el" href="namespacecasacore.html#ada1f75eb2b38067e3eb1af7f5d69ebb2">Double</a>&gt; casacore::TableExprData::getArrayDouble </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fieldNrs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a104056e6de80fc06dcfa9afd97388df1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classcasacore_1_1Array.html">Array</a>&lt;<a class="el" href="namespacecasacore.html#a79c2dfec4363785472512dbf384675a1">Int64</a>&gt; casacore::TableExprData::getArrayInt </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fieldNrs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab9ad96c642c5f9dc24cc9764f9293c34"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classcasacore_1_1Array.html">Array</a>&lt;<a class="el" href="classcasacore_1_1String.html">String</a>&gt; casacore::TableExprData::getArrayString </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fieldNrs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9a4dcd1cff8e5b0a25c90783f7fce183"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98">Bool</a> casacore::TableExprData::getBool </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fieldNrs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a scalar in the given type. </p>
<p>This might involve converting for Double and DComplex. Most default implementations throws an "not possible" exception. The default <code>getDouble</code> invokes <code>getInt</code>. The default <code>getDComplex</code> invokes <code>getDouble</code>. </p>

</div>
</div>
<a class="anchor" id="a82b38cc8cdb31402c1bfb2a2b7f510f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual DComplex casacore::TableExprData::getDComplex </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fieldNrs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae2c19b5322de19169273580cb05c834f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacecasacore.html#ada1f75eb2b38067e3eb1af7f5d69ebb2">Double</a> casacore::TableExprData::getDouble </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fieldNrs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classcasacore_1_1LogFilterExpr.html#a3255289e2fac8c907a0b609014d0a8bb">casacore::LogFilterExpr</a>.</p>

</div>
</div>
<a class="anchor" id="a9ad7f0e1e5a93f2cd5d7f59641282345"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacecasacore.html#a79c2dfec4363785472512dbf384675a1">Int64</a> casacore::TableExprData::getInt </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fieldNrs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a03a376c1658f096400e6175bcc20e705"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classcasacore_1_1String.html">String</a> casacore::TableExprData::getString </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fieldNrs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classcasacore_1_1LogFilterExpr.html#ab111758acb2f1584d363f974f2c7ef4c">casacore::LogFilterExpr</a>.</p>

</div>
</div>
<a class="anchor" id="a2f91eec5b52fb3c9dd7b284edc74a14f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classcasacore_1_1IPosition.html">IPosition</a> casacore::TableExprData::shape </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcasacore_1_1Block.html">Block</a>&lt; <a class="el" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>fieldNrs</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the shape of the given field. </p>
<p>Need only be implemented if there are arrays in the data. The default implementation returns an empty <a class="el" href="classcasacore_1_1IPosition.html" title="A Vector of integers, for indexing into Array&lt;T&gt; objects.">IPosition</a>. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>tables/TaQL/<a class="el" href="TableExprData_8h_source.html">TableExprData.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 1 2015 15:44:02 for casacore by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
