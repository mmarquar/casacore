<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>casacore: Coordinates_module</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">casacore
   &#160;<span id="projectnumber">$Rev$</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">Coordinates_module</div>  </div>
<div class="ingroups"><a class="el" href="group__coordinates.html">coordinates package (libcasa_coordinates)</a></div></div><!--header-->
<div class="contents">

<p>Classes to interconvert pixel and world (physical) coordinates.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__Coordinates__module__internal__classes"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Coordinates__module__internal__classes.html">Coordinates_module_internal_classes</a></td></tr>
<tr class="memdesc:group__Coordinates__module__internal__classes"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal Coordinates_module classes and functions. <br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1Coordinate.html">casacore::Coordinate</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface for converting between world and pixel coordinates.  <a href="classcasacore_1_1Coordinate.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1CoordinateSystem.html">casacore::CoordinateSystem</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interconvert pixel and world coordinates.  <a href="classcasacore_1_1CoordinateSystem.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1CoordinateUtil.html">casacore::CoordinateUtil</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functions for creating default CoordinateSystems.  <a href="classcasacore_1_1CoordinateUtil.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1DirectionCoordinate.html">casacore::DirectionCoordinate</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interconvert pixel positions and directions (e.g. RA/DEC).  <a href="classcasacore_1_1DirectionCoordinate.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1FITSCoordinateUtil.html">casacore::FITSCoordinateUtil</a></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1FrequencyAligner.html">casacore::FrequencyAligner&lt; T &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Aligns spectra in frequency space.  <a href="classcasacore_1_1FrequencyAligner.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1GaussianConvert.html">casacore::GaussianConvert</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts Gaussian parameters between pixel and world.  <a href="classcasacore_1_1GaussianConvert.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1LinearCoordinate.html">casacore::LinearCoordinate</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interconvert between pixel and a linear world coordinate.  <a href="classcasacore_1_1LinearCoordinate.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1ObsInfo.html">casacore::ObsInfo</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store miscellaneous information related to an observation.  <a href="classcasacore_1_1ObsInfo.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1Projection.html">casacore::Projection</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classcasacore_1_1Geometric.html" title="Discrete geometric distribution.">Geometric</a> parameters needed for a sky projection to a plane.  <a href="classcasacore_1_1Projection.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1QualityCoordinate.html">casacore::QualityCoordinate</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interconvert between pixel and <a class="el" href="classcasacore_1_1Quality.html" title="Quality parameter definitions.">Quality</a> value.  <a href="classcasacore_1_1QualityCoordinate.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1SpectralCoordinate.html">casacore::SpectralCoordinate</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interconvert pixel and frequency values.  <a href="classcasacore_1_1SpectralCoordinate.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1StokesCoordinate.html">casacore::StokesCoordinate</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interconvert between pixel and <a class="el" href="classcasacore_1_1Stokes.html" title="Stokes parameter definitions for interface to table data.">Stokes</a> value.  <a href="classcasacore_1_1StokesCoordinate.html#details">More...</a><br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcasacore_1_1TabularCoordinate.html">casacore::TabularCoordinate</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classcasacore_1_1Table.html" title="Main interface class to a read/write table.">Table</a> lookup 1-D coordinate, with interpolation.  <a href="classcasacore_1_1TabularCoordinate.html#details">More...</a><br/></td></tr>
<tr class="memitem:ga268d180af517aa92dd693fa17d44a462"><td class="memItemLeft" align="right" valign="top">ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Coordinates__module.html#ga268d180af517aa92dd693fa17d44a462">casacore::operator&lt;&lt;</a> (ostream &amp;os, const ObsInfo &amp;info)</td></tr>
<tr class="memdesc:ga268d180af517aa92dd693fa17d44a462"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global functions.  <a href="#ga268d180af517aa92dd693fa17d44a462"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<p>Classes to interconvert pixel and world (physical) coordinates. </p>
<pre class="fragment"> @anchor Coordinates_module_anchor 
</pre><p>See <a href="#Coordinates_module_Class_List">below</a> for an overview of the classes in this module.</p>
<h3>Prerequisite</h3>
<ul>
<li>
Knowledge of astronomical coordinate conversions in general. Probably the best documents are the papers by Mark Calabretta and Eric Greisen. The initial draft from 1996 can be found at <a href="http://www.atnf.csiro.au/~mcalabre">http://www.atnf.csiro.au/~mcalabre</a>. It is this draft that the <a class="el" href="classcasacore_1_1Coordinate.html" title="Interface for converting between world and pixel coordinates.">Coordinate</a> classes are based upon. Since then, this paper has evolved into three which can be found at the above address, and will be published in the Astronomy and Astrophysics Supplement Series (probably in 2000). The design has changed since the initial draft. When these papers are finalized, and the IAU has ratified the new standards, WCSLIB (Mark Calabretta's implementation of these conventions) will be revised for the new designs. At that time, the <a class="el" href="classcasacore_1_1Coordinate.html" title="Interface for converting between world and pixel coordinates.">Coordinate</a> classes may also be revised. </li>
<li>
Generic Casacore classes; especially those in the <a class="el" href="/data/BRAGE_1/mar637/casacore/casa/Arrays.h.html#Arrays_module_anchor">Arrays</a> module. </li>
<li>
The <a class="el" href="/data/BRAGE_1/mar637/casacore/measures/Measures.h.html#Measures_module_anchor">Measures</a> module. </li>
</ul>
<h3>Review Status</h3>
<dl>
<dt>Reviewed By:</dt>
<dd>Peter Barnes</dd>
<dt>Date Reviewed:</dt>
<dd>1999/12/24</dd>
</dl>
<h3>Synopsis</h3>
<p>The primary notion is that a <a class="el" href="classcasacore_1_1Coordinate.html">Coordinate </a> can interconvert between a length "n" <a class="el" href="classcasacore_1_1Vector.html">Vector&lt;Double&gt;</a> (the pixel coordinate) and a length "m" <a class="el" href="classcasacore_1_1Vector.html">Vector&lt;Double&gt;</a> (the "world" coordinate). Note that "m" and "n" do not in principle have to be the same (so that one can get both the RA and DEC from an image slice, for example), however in practice they currently always are. Each <a class="el" href="classcasacore_1_1Coordinate.html" title="Interface for converting between world and pixel coordinates.">Coordinate</a> has the full mapping from pixel to world coordinates, i.e. it has a reference value, reference pixel, increments, and an arbitrary transformation matrix. To go from a pixel to a world coordinate the following steps are applied: </p>
<ol>
<li>
The reference pixel is subtracted from the pixel position. </li>
<li>
The result is multiplied by the transformation matrix. </li>
<li>
The result is multiplied by an increment per output axis to convert it into physical coordinates. </li>
<li>
For some coordinate types (e.g., Direction), a non-linear function is applied to this result. </li>
</ol>
<p>The classes are arranged as follows. The base class is <a class="el" href="classcasacore_1_1Coordinate.html">Coordinate </a> which defines the interface. Classes derived from it are </p>
<ol>
<li>
<a class="el" href="classcasacore_1_1DirectionCoordinate.html">DirectionCoordinate </a> </li>
<li>
<a class="el" href="classcasacore_1_1LinearCoordinate.html">LinearCoordinate </a> </li>
<li>
<a class="el" href="classcasacore_1_1SpectralCoordinate.html">SpectralCoordinate </a> </li>
<li>
<a class="el" href="classcasacore_1_1TabularCoordinate.html">TabularCoordinate </a> </li>
<li>
<a class="el" href="classcasacore_1_1StokesCoordinate.html">StokesCoordinate </a> </li>
<li>
<a class="el" href="classcasacore_1_1CoordinateSystem.html">CoordinateSystem </a> </li>
</ol>
<p>Other classes are <a class="el" href="classcasacore_1_1Projection.html">Projection </a> which is used to specify an astronomical projection for DirectionCoordinates, and <a class="el" href="classcasacore_1_1LinearXform.html">LinearXform </a> a helper class which the application programmer will not interact with.</p>
<p><a class="el" href="classcasacore_1_1CoordinateSystem.html">CoordinateSystem </a> is the class that application programmers will usually interact with. A <a class="el" href="classcasacore_1_1CoordinateSystem.html" title="Interconvert pixel and world coordinates.">CoordinateSystem</a> consists of a collection of the other classes derived from <a class="el" href="classcasacore_1_1Coordinate.html" title="Interface for converting between world and pixel coordinates.">Coordinate</a>. Normally one group will be for RA/DEC, another for a <a class="el" href="classcasacore_1_1Stokes.html" title="Stokes parameter definitions for interface to table data.">Stokes</a> axis, and another group for the spectral axis. The axes may be transposed arbitrarily, for example RA could be the first axis, and DEC the third.</p>
<p>Normally the <a class="el" href="classcasacore_1_1CoordinateSystem.html" title="Interconvert pixel and world coordinates.">CoordinateSystem</a> being manipulated will be embedded in a <a class="el" href="classcasacore_1_1PagedImage.html" title="Read, store, and manipulate astronomical images.">PagedImage</a> or other object. Note that the axes of the <a class="el" href="classcasacore_1_1PagedImage.html" title="Read, store, and manipulate astronomical images.">PagedImage</a> do not necessarily map directly to the axes in the <a class="el" href="classcasacore_1_1CoordinateSystem.html" title="Interconvert pixel and world coordinates.">CoordinateSystem</a>. Functionality is provided to determine this mapping.</p>
<p>One or more axes from the <a class="el" href="classcasacore_1_1CoordinateSystem.html" title="Interconvert pixel and world coordinates.">CoordinateSystem</a> may be removed. Pixel axes and/or world axes may be removed. You are encouraged to leave all the world axes when you remove pixel axes. <br/>
 If a world axis is removed, the corresponding pixel axis is also removed. This means that one can be sure that a pixel axis always has a corresponding world axis (it makes no sense otherwise). The opposite is not necessarily true: a world axis can exist without a pixel axis.</p>
<p>The linear transformation and sky projection computations are carried out in an underlying library &ndash; WCSLIB &ndash; written by Mark Calabretta of the ATNF.</p>
<p><br/>
<b>Caution:</b><em> All pixels coordinates are zero relative; </em><br/>
</p>
<h3>Example</h3>
<p><a class="anchor" id="Coordinates_example"></a> First, let's make a <a class="el" href="classcasacore_1_1DirectionCoordinate.html" title="Interconvert pixel positions and directions (e.g. RA/DEC).">DirectionCoordinate</a> &mdash; used to represent a direction, usually an RA/DEC, but it could also be, e.g., an AZ/EL pair. </p>
<div class="fragment"><div class="line">Matrix&lt;Double&gt; xform(2,2);                                    <span class="comment">// 1</span></div>
<div class="line">xform = 0.0; xform.diagonal() = 1.0;                          <span class="comment">// 2</span></div>
<div class="line">Quantum&lt;Double&gt; refLon(135.0, <span class="stringliteral">&quot;deg&quot;</span>);</div>
<div class="line">Quantum&lt;Double&gt; refLat(60.0, <span class="stringliteral">&quot;deg&quot;</span>);</div>
<div class="line">Quantum&lt;Double&gt; incLon(-1.0, <span class="stringliteral">&quot;deg&quot;</span>);</div>
<div class="line">Quantum&lt;Double&gt; incLat(1.0, <span class="stringliteral">&quot;deg&quot;</span>);</div>
<div class="line">DirectionCoordinate radec(<a class="code" href="classcasacore_1_1MDirection.html#a8d354a7146791b1bcb1a6a7d73bca2d1ab4560518808e7cd4baa13fec1113a73a">MDirection::J2000</a>,                  <span class="comment">// 3</span></div>
<div class="line">Projection(<a class="code" href="classcasacore_1_1Projection.html#a2b93abdf94fe07785161353ee2b5959bad1cc12a4bb3b1dd8e8c1f2e9952ade3c" title="Orthographics/synthesis.">Projection::SIN</a>),          <span class="comment">// 4</span></div>
<div class="line">refLon, refLat,                       <span class="comment">// 5</span></div>
<div class="line">incLon, incLat,                       <span class="comment">// 6</span></div>
<div class="line">xform,                                <span class="comment">// 7</span></div>
<div class="line">128, 128);                            <span class="comment">// 8</span></div>
</div><!-- fragment --> <ul>
<li>
<em>1-2:</em>Here we set up a diagonal transformation matrix. Normally this matrix should be diagonal, however if you wanted to introduce a rotation or skew, you would do it through this matrix. </li>
<li>
<em>3:</em>This defines the astronomical type of the world coordinate. Most of the time it will probably be J2000 or B1950, but there are many other possibilities as listed in the <a class="el" href="classcasacore_1_1MDirection.html">MDirection </a> class header. </li>
<li>
<em>4:</em>The <a class="el" href="classcasacore_1_1Projection.html">Projection </a> class defines the "geometry" that is used to map <code>xy&lt;&ndash;&gt;world</code>. SIN is the most common projection for radio interferometers. Note that SIN can optionally take parameters as defined in Calabretta and Greisen. If not provided, they default to 0.0, which is the "old" SIN convention. </li>
<li>
<em>5:</em>Set the reference position to RA=135, DEC=60 degrees. Note that the native units of a <a class="el" href="classcasacore_1_1DirectionCoordinate.html" title="Interconvert pixel positions and directions (e.g. RA/DEC).">DirectionCoordinate</a> is radians. </li>
<li>
<em>6:</em> Set the increments to -1 degree in RA, and +1 degree in DEC. </li>
<li>
<em>7:</em> Set the previously defined transformation matrix. </li>
<li>
<em>8:</em> Set the zero-relative reference pixel. Note that it does not have to be incremental. At the reference pixel, the world coordinate has the reference value. </li>
</ul>
<p>Although we happeend to create our <a class="el" href="classcasacore_1_1DirectionCoordinate.html" title="Interconvert pixel positions and directions (e.g. RA/DEC).">DirectionCoordinate</a> with Quanta in degrees, these have been converted to radians by the constructor. We can set the native units to degrees if we wish as follows: </p>
<div class="fragment"><div class="line">Vector&lt;String&gt; units(2); units = <span class="stringliteral">&quot;deg&quot;</span>;                       <span class="comment">//  9</span></div>
<div class="line">radec.setWorldAxisUnits(units);                               <span class="comment">// 10</span></div>
</div><!-- fragment --><p> The increment and reference value are updated appropriately.</p>
<p>Set up a couple of vectors to use the world and pixel coordinate values. </p>
<div class="fragment"><div class="line">Vector&lt;Double&gt; world(2), pixel(2);                            <span class="comment">// 11</span></div>
<div class="line">pixel = 138.0;                                                <span class="comment">// 12</span></div>
</div><!-- fragment --><p> We use 138 as an abitrary pixel position which is near the reference pixel so we can tell if the answers look foolish or not.</p>
<p>We can actually perform a transformation like this as follows. If it succeeds we print the value of the world coordinate. </p>
<div class="fragment"><div class="line"><a class="code" href="namespacecasacore.html#abd5691f9e13acc90d901e4007740ff98" title="Define the standard types used by Casacore.">Bool</a> ok = radec.toWorld(world, pixel);                        <span class="comment">// 13</span></div>
<div class="line"><span class="keywordflow">if</span> (!ok) {                                                    <span class="comment">// 14</span></div>
<div class="line">cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; radec.errorMessage() &lt;&lt; endl;          <span class="comment">// 15</span></div>
<div class="line"><span class="keywordflow">return</span> 1;                                                   <span class="comment">// 16</span></div>
<div class="line">}                                                             <span class="comment">// 17</span></div>
<div class="line">cout &lt;&lt; world &lt;&lt; <span class="stringliteral">&quot; &lt;--- &quot;</span> &lt;&lt; pixel &lt;&lt; endl;         <span class="comment">// 18</span></div>
</div><!-- fragment --><p> There is an overloaded "toWorld" function that produces an <a class="el" href="classcasacore_1_1MDirection.html" title="A Measure: astronomical direction.">MDirection</a> in case you want to, e.g., find out what the position in B1950 coordinates would be.</p>
<p>The reverse transformation takes place similarly: </p>
<div class="fragment"><div class="line">ok = radec.toPixel(pixel, world);                             <span class="comment">// 19</span></div>
</div><!-- fragment --><p>Suppose we have an image with a <a class="el" href="classcasacore_1_1Stokes.html" title="Stokes parameter definitions for interface to table data.">Stokes</a> axis. It can be set up as follows: </p>
<div class="fragment"><div class="line">Vector&lt;Int&gt; iquv(4);</div>
<div class="line">iquv(0) = <a class="code" href="classcasacore_1_1Stokes.html#a09df2a8119f3f38bbd1110a05df8ade1a77aeca6e843675f4406548f89bcade34">Stokes::I</a>; iquv(1) = <a class="code" href="classcasacore_1_1Stokes.html#a09df2a8119f3f38bbd1110a05df8ade1a8981817574f16aea9a85b7ac11c4845a">Stokes::Q</a>;                    <span class="comment">// 21</span></div>
<div class="line">iquv(2) = <a class="code" href="classcasacore_1_1Stokes.html#a09df2a8119f3f38bbd1110a05df8ade1a2f3c2134e23876a024f04d5a5dcabbd7">Stokes::U</a>; iquv(3) = <a class="code" href="classcasacore_1_1Stokes.html#a09df2a8119f3f38bbd1110a05df8ade1ac2c8556edf9ea0fbd66d0e49af259aa0" title="standard stokes parameters">Stokes::V</a>;                    <span class="comment">// 22</span></div>
<div class="line">StokesCoordinate stokes(iquv);                               <span class="comment">// 23</span></div>
</div><!-- fragment --><p> We create an integer array the same length as the <a class="el" href="classcasacore_1_1Stokes.html" title="Stokes parameter definitions for interface to table data.">Stokes</a> axis, and place the corresponding <a class="el" href="classcasacore_1_1Stokes.html" title="Stokes parameter definitions for interface to table data.">Stokes</a> enum into each element of the array. The values must be unique, e.g. there can only be one "I" plane. Besides the generic <code><a class="el" href="classcasacore_1_1Vector.html" title="A 1-D Specialization of the Array class.">Vector</a>&lt;Double&gt;</code> toWorld/toPixel interface, you can also directly interconvert between <a class="el" href="classcasacore_1_1Stokes.html" title="Stokes parameter definitions for interface to table data.">Stokes</a> enum and and (zero-relative) plane number: </p>
<div class="fragment"><div class="line"><a class="code" href="namespacecasacore.html#abb6e2c1bac472ca1ebadadf96cc8426f">Int</a> plane;                                                   <span class="comment">// 24</span></div>
<div class="line">ok = stokes.toPixel(plane, <a class="code" href="classcasacore_1_1Stokes.html#a09df2a8119f3f38bbd1110a05df8ade1a8981817574f16aea9a85b7ac11c4845a">Stokes::Q</a>);                       <span class="comment">// 25</span></div>
</div><!-- fragment --><p> Here it will return <code>True</code> and set plane to 1. On the other hand, it would return <code>False</code> for: </p>
<div class="fragment"><div class="line">ok = stokes.toPixel(plane, <a class="code" href="classcasacore_1_1Stokes.html#a09df2a8119f3f38bbd1110a05df8ade1ad0ab7d66ce1b6dc55628111034eecf0a">Stokes::XX</a>);                      <span class="comment">// 26</span></div>
</div><!-- fragment --><p> since "XX" is not one of the <a class="el" href="classcasacore_1_1Stokes.html" title="Stokes parameter definitions for interface to table data.">Stokes</a> enumerations we used to create this coordinate.</p>
<p>A Spectral ("frequency") coordinate may be created as follows: </p>
<div class="fragment"><div class="line">SpectralCoordinate spectral(<a class="code" href="classcasacore_1_1MFrequency.html#a5033de7b159a385150bc49326e926164a9c50796c710b02eba283902bbcc3768d">MFrequency::TOPO</a>,               <span class="comment">// 27</span></div>
<div class="line">1.4E+9,                         <span class="comment">// 28</span></div>
<div class="line">2.0E+4,                         <span class="comment">// 29</span></div>
<div class="line">0,                              <span class="comment">// 30</span></div>
<div class="line">1420.40575E+6);                 <span class="comment">// 31</span></div>
</div><!-- fragment --><p> The default frequency units of a spectral coordinate are Hz, although they may be changed to whatever is convenient. The first line (27) defines the type of frequency we have &ndash; topocentric here. The second (28) line defines the frequency at the reference pixel, 0 (28) here. The channel increment is defined on line 29. A rest frequency of the spectral may be provided. It is useful in calculating doppler velocities. These calculations are carried out by the <a class="el" href="classcasacore_1_1MFrequency.html">MFrequency </a> and <a class="el" href="classcasacore_1_1MDoppler.html">MDoppler </a> classes of the Measures system.</p>
<h3>Motivation</h3>
<p>The primary motivation is to provide support for converting pixel locations in an image to physical ("world") positions.</p>
<h3>To Do</h3>
<ul>
<li>
Add measures interfaces that handle reference frame conversions </li>
<li>
offset coordinates </li>
</ul>
<p><a class="anchor" id="Coordinates_module_Class_List"></a> </p>
<h2>Function Documentation</h2>
<a class="anchor" id="ga268d180af517aa92dd693fa17d44a462"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ostream&amp; casacore::operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ObsInfo &amp;&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Global functions. </p>
<p><a class="anchor" id="ObsInfo_Output"></a> Output declaration - useful for debugging. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Apr 1 2015 15:43:42 for casacore by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
